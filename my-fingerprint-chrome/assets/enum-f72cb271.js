const c=function(e,t=1,n=0){typeof e=="string"&&(e=b(e));const s=233280;e=(e*9301+49297)%s,e<0&&(e+=s);const r=e/s;return n+r*(t-n)},D=(e,t)=>{const n=[...e];let s=n.length,r,o;const a=()=>{const i=Math.sin(t++)*1e4;return i-Math.floor(i)};for(;s;)o=Math.floor(a()*s--),r=n[s],n[s]=n[o],n[o]=r;return n},S=function(e,t){const n=e.split(".").map(Number),s=t.split(".").map(Number);for(let r=0;r<n.length;++r){if(s.length===r)return 1;if(n[r]!==s[r])return n[r]>s[r]?1:-1}return n.length!==s.length?-1:0},$=function(){return Math.floor(c(Math.random()*1e6,Number.MAX_SAFE_INTEGER,1))},b=e=>{let t=0;for(let n=0;n<e.length;n++){let s=e.charCodeAt(n);t=(t<<5)-t+s,t=t&t}return Math.abs(t%Number.MAX_SAFE_INTEGER)},w=e=>{try{return new URL(e)}catch{return}},x=e=>e===0?0:e===1?10:(e<0&&(e=-e),Math.pow(10,Math.ceil(Math.log10(e)))),h=(e,t,n,s=0)=>{let[r,...o]=t.split(".");if(s>0){let i=Number(r);r=!isNaN(i)&&i>=s?String(Math.floor(c(e,i,i-10))):r}if(o.length===0)return{major:r,full:r};n=n??o.length;const a=[];for(let i=0;i<n;i++){const u=Number(o[i]);if(isNaN(u)){a.push(o[i]);continue}const p=x(u),d=Math.floor(c(e+i,p,0));a.push(d.toString())}return{major:r,full:[r,...a].join(".")}},M=(e,t,n=new WeakMap)=>{if(n.has(e))return n.get(e);const s=new Proxy(e,{get(r,o,a){const i=r[o];return typeof i=="object"&&i!==null?M(i,t):t.get?t.get(r,o,a):i},set:t.set});return n.set(e,s),s},V=(e,t)=>!t||!e?.length?!1:(t="."+t,e.some(n=>t.endsWith("."+n))),v=(e,t)=>!t||!e?.length?!1:(t="."+t,e.some(n=>("."+n).endsWith(t))),N=(e,t)=>{if(!t)return[];if(!e?.length)return[];t="."+t;const n=[];for(const s of e)("."+s).endsWith(t)&&n.push(s);return n},R=(e,t)=>{if(!t)return[];if(!e?.length)return[];t="."+t;const n=[];for(const s of e)t.endsWith("."+s)&&n.push(s);return n},y=function(e,t){t=t||300;let n;return function(...s){clearTimeout(n),n=setTimeout(()=>e(...s),t)}},E=function(e){let t;return function(...n){return t||(t=e(...n).finally(()=>t=void 0),t)}},g={uaSeries:new Map},I=e=>{if(e.includes("Chrome"))return"chrome";if(e.includes("Firefox"))return"firefox"};class l{name;version;constructor(t,n){this.name=t,this.version=n}static parse(t){const n=t.split("/");return new l(n[0],n[1])}toString(){return this.version?`${this.name}/${this.version}`:this.name}setName(t){this.name=t}setVersion(t){this.version=t}}class f{static uaRule=/^(?<product>.+?) \((?<systemInfo>.+?)\)( (?<engine>.+?))?( \((?<engineDetails>.+?)\))?( (?<extensions>.+?))?$/;static firefoxUaRule=/^(?<product>.+?) \((?<systemInfo>.+?)\) (?<extensions>.+?)$/;type;product;systemInfo;engine;engineDetails;extensions;constructor(t){let n;if(t.includes("Firefox")?(this.type="firefox",n=t.match(f.firefoxUaRule)?.groups):(this.type="base",n=t.match(f.uaRule)?.groups),!n)throw new Error("unable to parse");this.product=l.parse(n.product),this.systemInfo=n.systemInfo.split(";").map(s=>s.trim()),this.engine=n.engine?.split(" ").map(s=>l.parse(s)),this.engineDetails=n.engineDetails?.split(",").map(s=>s.trim()),this.extensions=n.extensions?.split(" ").map(s=>l.parse(s))}toString(t){let n;t?n=this.product.version:n=this.product.toString();const s=this.systemInfo.join("; "),r=this.engine?.map(a=>a.toString()).join(" "),o=this.extensions?.map(a=>a.toString()).join(" ");if(this.type==="firefox")return`${n} (${s}) ${r} ${o}`;{const a=this.engineDetails?.join(", ");return`${n} (${s}) ${r} (${a}) ${o}`}}}const m=(e,t)=>({...t,version:t.version&&h(e,t.version).full}),F=async(e,t)=>{if(!t.userAgentData||!t.userAgentData.brands)return{};const n={brands:t.userAgentData.brands.map(s=>m(e,s))};if(t.userAgentData.getHighEntropyValues){const{fullVersionList:s,uaFullVersion:r}=await t.userAgentData.getHighEntropyValues(["fullVersionList","uaFullVersion"]);n.fullVersionList=s?.map(o=>m(e,o)),n.uaFullVersion=r&&h(e,r).full}return n},L=(e,t,n)=>{const s=n?"app":"ua",r=`${e}:${t.userAgent}`,o=g.uaSeries.get(r);if(o)return o[s];try{const a=new f(t.userAgent);if(a.extensions?.length)for(const u of a.extensions)u.name?.toLocaleLowerCase()!=="safari"&&u.version&&u.setVersion(h(e,u.version).full);const i={ua:a.toString(),app:a.toString(n)};return g.uaSeries.set(r,i),i[s]}catch{return n?t.appVersion:t.userAgent}};var A=(e=>(e[e.default=0]="default",e[e.value=1]="value",e[e.page=2]="page",e[e.browser=3]="browser",e[e.domain=4]="domain",e[e.global=5]="global",e[e.enabled=6]="enabled",e[e.disabled=7]="disabled",e))(A||{});export{A as H,L as a,F as b,$ as c,E as d,y as e,V as f,I as g,N as h,M as i,b as j,v as k,S as l,R as m,D as s,w as t};
